FUNCTION "OTEBW_TEST_CLT_CD"."CLT.CD_BASE::EABL" ( IN x_ABLBELNR NVARCHAR(20) )
RETURNS TABLE(
MANDT NVARCHAR(000003),ABLBELNR NVARCHAR(000020),GERNR NVARCHAR(000018),EQUNR NVARCHAR(000018),ZWNUMMER NVARCHAR(000003),ADAT NVARCHAR(000008),ATIM NVARCHAR(000004),V_ZWSTAND DECIMAL(000017,000000),N_ZWSTAND DECIMAL(000014,000000),V_ZWSTNDAB DECIMAL(000017,000000),N_ZWSTNDAB DECIMAL(000014,000000),MASSREAD NVARCHAR(000003),MASSBILL NVARCHAR(000003),STANZVOR NVARCHAR(000002),STANZNAC NVARCHAR(000002),SCHAEVER NVARCHAR(000002),SCHAEGR NVARCHAR(000002),AKTIV NVARCHAR(000001),ADATSOLL NVARCHAR(000008),ADATMAX NVARCHAR(000008),ATIMMAX NVARCHAR(000004),ADATTATS NVARCHAR(000008),ATIMTATS NVARCHAR(000004),ADATERZ NVARCHAR(000008),ATIMERZ NVARCHAR(000004),ADATPROG NVARCHAR(000008),ATIMPROG NVARCHAR(000004),ZUORDDAT NVARCHAR(000008),THGDATUM NVARCHAR(000008),PRUEFZAHL NVARCHAR(000002),BAPERTYP NVARCHAR(000001),ABLSTAT NVARCHAR(000001),PRUEFPKT NVARCHAR(000002),POPCODE NVARCHAR(000002),PRUEFTYP NVARCHAR(000001),ABLHINW NVARCHAR(000004),STABLHW NVARCHAR(000002),KONTRVRF NVARCHAR(000001),ABLESART NVARCHAR(000002),ABLESER NVARCHAR(000003),NACHERF NVARCHAR(000001),MDENR NVARCHAR(000003),MDEUPL NVARCHAR(000001),E_ZEITVBL NVARCHAR(000001),E_ZVLZUORD NVARCHAR(000003),STEUERGRP NVARCHAR(000004),ARBAUF NVARCHAR(000001),KSTATUS NVARCHAR(000001),ERDAT NVARCHAR(000008),ERNAM NVARCHAR(000012),AEDAT NVARCHAR(000008),AENAM NVARCHAR(000012),ENTRYNUMB NVARCHAR(000008),ACTOR NVARCHAR(000014),ISTABLART NVARCHAR(000002),ABLESTYP NVARCHAR(000002),E_ZVBL_BEZDAT NVARCHAR(000008),SM_AUFNR NVARCHAR(000012),DOC_TYPE NVARCHAR(000001),ADATREAL NVARCHAR(000008),ATIMREAL NVARCHAR(000004),S_ISTABLART NVARCHAR(000002),S_AKTIV NVARCHAR(000001),S_ABLSTAT NVARCHAR(000001),S_V_ZWSTAND DECIMAL(000017,000000),S_N_ZWSTAND DECIMAL(000014,000000),S_V_ZWSTNDAB DECIMAL(000017,000000),S_N_ZWSTNDAB DECIMAL(000014,000000),REMOVED NVARCHAR(000001),BP NVARCHAR(000001),REM_ABLBELNR NVARCHAR(000020),REM_ABLESER NVARCHAR(000003),S_ADATSOLL NVARCHAR(000008),S_ZVBL_BEZDAT NVARCHAR(000008),AMS NVARCHAR(000004),TRANSSTAT NVARCHAR(000005),TRANSTSTAMP DECIMAL(000021,000000),SOURCESYST NVARCHAR(000001),QNT DECIMAL(000031,000000),QDSTAT NVARCHAR(000002),QDPROC NVARCHAR(000002),PREV_MRDOC NVARCHAR(000020),TT_FROM TIMESTAMP,TT_TO TIMESTAMP)
LANGUAGE SQLSCRIPT SQL SECURITY INVOKER AS BEGIN
RETURN SELECT MANDT,ABLBELNR,GERNR,EQUNR,ZWNUMMER,to_date(nullif(ADAT,'00000000'),'YYYYMMDD') as ADAT,ATIM,V_ZWSTAND,N_ZWSTAND,V_ZWSTNDAB,N_ZWSTNDAB,MASSREAD,MASSBILL,STANZVOR,STANZNAC,SCHAEVER,SCHAEGR,AKTIV,to_date(nullif(ADATSOLL,'00000000'),'YYYYMMDD') as ADATSOLL,to_date(nullif(ADATMAX,'00000000'),'YYYYMMDD') as ADATMAX,ATIMMAX,to_date(nullif(ADATTATS,'00000000'),'YYYYMMDD') as ADATTATS,ATIMTATS,to_date(nullif(ADATERZ,'00000000'),'YYYYMMDD') as ADATERZ,ATIMERZ,to_date(nullif(ADATPROG,'00000000'),'YYYYMMDD') as ADATPROG,ATIMPROG,to_date(nullif(ZUORDDAT,'00000000'),'YYYYMMDD') as ZUORDDAT,to_date(nullif(THGDATUM,'00000000'),'YYYYMMDD') as THGDATUM,PRUEFZAHL,BAPERTYP,ABLSTAT,PRUEFPKT,POPCODE,PRUEFTYP,ABLHINW,STABLHW,KONTRVRF,ABLESART,ABLESER,NACHERF,MDENR,MDEUPL,E_ZEITVBL,E_ZVLZUORD,STEUERGRP,ARBAUF,KSTATUS,to_date(nullif(ERDAT,'00000000'),'YYYYMMDD') as ERDAT,ERNAM,to_date(nullif(AEDAT,'00000000'),'YYYYMMDD') as AEDAT,AENAM,ENTRYNUMB,ACTOR,ISTABLART,ABLESTYP,to_date(nullif(E_ZVBL_BEZDAT,'00000000'),'YYYYMMDD') as E_ZVBL_BEZDAT,SM_AUFNR,DOC_TYPE,to_date(nullif(ADATREAL,'00000000'),'YYYYMMDD') as ADATREAL,ATIMREAL,S_ISTABLART,S_AKTIV,S_ABLSTAT,S_V_ZWSTAND,S_N_ZWSTAND,S_V_ZWSTNDAB,S_N_ZWSTNDAB,REMOVED,BP,REM_ABLBELNR,REM_ABLESER,to_date(nullif(S_ADATSOLL,'00000000'),'YYYYMMDD') as S_ADATSOLL,to_date(nullif(S_ZVBL_BEZDAT,'00000000'),'YYYYMMDD') as S_ZVBL_BEZDAT,AMS,TRANSSTAT,TRANSTSTAMP,SOURCESYST,QNT,QDSTAT,QDPROC,PREV_MRDOC,TST AS TT_FROM, "OTEBW_TEST_CLT_CD"."CLT.CD_BASE::EABL_TRANSF_TT_TO"(MANDT,ABLBELNR,TST) as TT_TO from "OTEBW_TEST_CLT_CD"."EABL_CHG" where ABLBELNR=:x_ABLBELNR and (not CLT_ACTION='D');
END;