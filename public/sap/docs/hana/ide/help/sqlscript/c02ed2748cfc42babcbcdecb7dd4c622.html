<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=24966695088669055"/>
<title>M_ACTIVE_PROCEDURES</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loioc02ed2748cfc42babcbcdecb7dd4c622";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loioc02ed2748cfc42babcbcdecb7dd4c622">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">M_ACTIVE_PROCEDURES</h1>

			
	<div class="body refbody"><p class="shortdesc"/>
<div class="section">
			<p class="p">The view M_ACTIVE_PROCEDURES monitors all internally executed statements starting
				from a procedure call. That also includes remotely executed statements. </p>

			<p class="p">M_ACTIVE_PROCEDURES is similar to M_ACTIVE_STATEMENTS but keeps the records of
				completed internal statements until the parent procedure finishes, and shows them in
				hierarchical order of nested level. The structure of M_ACTIVE_PROCEDURES looks as
				follows: </p>

			<div class="p">
				
<div class="table-wrapper tablenoborder"><table summary="" id="loioc02ed2748cfc42babcbcdecb7dd4c622__table_fth_tlf_xt" class="table" frame="border" border="1" rules="all">
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" id="d904447e42">
									<p class="p">Column name</p>

								</th>

								<th class="entry" valign="top" id="d904447e48">
									<p class="p">Data type</p>

								</th>

								<th class="entry" valign="top" id="d904447e54">
									<p class="p">Description</p>

								</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_HOST</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">VARCHAR(64)</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Procedure Host</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_PORT</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Procedure Internal Port</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_SCHEMA_NAME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">NVARCHAR(256)</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Schema name of the stored procedure</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_NAME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">NVARCHAR(256)</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Name of the stored procedure</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_CONNECTION_ID</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Procedure connection ID</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">PROCEDURE_TRANSACTION_ID</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Procedure transaction ID</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_ID</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">VARCHAR(20)</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Logical ID of the statement</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_STRING</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">NCLOB</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">SQL statement</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_PARAMETERS</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">NCLOB</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Statement parameters</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_STATUS</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">VARCHAR(16)</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Status of the statement:</p>

									<p class="p">EXECUTING: statement is still running </p>

									<p class="p">COMPLETED: statement is completed </p>

									<p class="p">COMPILING: statement will be compiled </p>

									<p class="p">ABORTED: statement was aborted </p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_EXECUTION_COUNT</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Count of statement execution</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_DEPTH</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Statement depth</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_COMPILE_TIME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">BIGINT</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Elapsed time for compiling statement (mircoseconds)</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_EXECUTION_TIME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">BIGINT</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Elapsed time for executing statement (mircoseconds)</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_START_TIME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">TIMESTAMP</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Statement start time</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_END_TIME</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">TIMESTAMP</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Statement end time</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_CONNECTION_ID</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Connection ID of the statement</p>

								</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">STATEMENT_TRANSACTION_ID</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">INTEGER</p>

								</td>

								<td class="entry" valign="top" headers="d904447e42 d904447e48 d904447e54 ">
									<p class="p">Transaction ID of the statement</p>

								</td>

							</tr>

						</tbody>

					</table>
</div>

			</div>

			<p class="p">Among other things the M_ACTIVE_PROCEDURES is helpful for analyzing long running
				procedures and to determine their current status. You can run the following query
				from another session to find more about the status of a procedure, like
				MY_SCHEMA.MY_PROC in the example:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">select * from M_ACTIVE_PROCEDURES where procedure_name = ‘my_proc’ and procedure_schema_name = ‘my_schema’;</pre></div>

			<p class="p">There is also the INI-configuration <span class="keyword cmdname">execution_monitoring_level</span>
				available to control the granularity of monitoring level: </p>

			
<div class="table-wrapper tablenoborder"><table summary="" id="loioc02ed2748cfc42babcbcdecb7dd4c622__table_ifx_dmf_xt" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1: </span></caption>
<colgroup><col width="50%"/><col width="50%"/></colgroup>

					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="50%" id="d904447e488">
								<p class="p">Level </p>

							</th>

							<th class="entry" valign="top" width="50%" id="d904447e494">
								<p class="p">Description </p>

							</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d904447e488 ">
								<p class="p">0</p>

							</td>

							<td class="entry" valign="top" width="50%" headers="d904447e494 ">
								<p class="p">Disabling the feature</p>

							</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d904447e488 ">
								<p class="p">1</p>

							</td>

							<td class="entry" valign="top" width="50%" headers="d904447e494 ">
								<p class="p">Full information but no values for 'STATEMENT_PARAMETER'</p>

							</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d904447e488 ">
								<p class="p">2</p>

							</td>

							<td class="entry" valign="top" width="50%" headers="d904447e494 ">
								<p class="p">Default monitoring level, full information for the monitoring
									view</p>

							</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="50%" headers="d904447e488 ">
								<p class="p">3</p>

							</td>

							<td class="entry" valign="top" width="50%" headers="d904447e494 ">
								<p class="p">Intermediate status of internal statements will be traced into
									indexserver trace. </p>

							</td>

						</tr>

					</tbody>

				</table>
</div>

			<p class="p">To prevent flooding of the memory with irrelevant data, the number of records is
				limited. If the record count exceeds the given threshold then the first record will
				be erased independent from its status. The limit can be adjust the INI-Parameter
					<span class="keyword cmdname">execution_monitoring_limit</span>, e.g.
					<span class="keyword cmdname">execution_monitoring_limit = 100 000</span>. </p>

			<div class="p">Limitations: <ul class="ul" id="loioc02ed2748cfc42babcbcdecb7dd4c622__ul_ip2_lmf_xt">
					<li class="li">No triggers and functions are supported.</li>

					<li class="li">Information other than EAPI layer is not monitored. (but might be included
						in the total compilation time or execution time) </li>

				</ul>
</div>

			<p class="p">As mentioned above, M_ACTIVE_PROCEDURES keeps the records of completed internal
				statements until the parent procedure finishes which is the default behavior. This
				behavior can be changed with the following two configuration parameters:
					<span class="keyword cmdname">NUMBER_OF_CALLS_TO_RETAIN_AFTER_EXECUTION</span> and
					<span class="keyword cmdname">RETENTION_PERIOD_FOR_SQLSCRIPT_CONTEXT.</span>
			</p>

			<p class="p">With <span class="keyword cmdname">NUMBER_OF_CALLS_TO_RETAIN_AFTER_EXECUTION</span> you can specify how
				many calls retain after execution and
					<span class="keyword cmdname">RETENTION_PERIOD_FOR_SQLSCRIPT_CONTEXT </span> defines how long the
				result should be kept in M_ACTIVE_PROCEDURES, unit is in seconds. The interaction of
				these two parameters are as follows:</p>

			<div class="p">
				<ul class="ul" id="loioc02ed2748cfc42babcbcdecb7dd4c622__ul_vlt_trd_qv">
					<li class="li">
						<p class="p">Both parameters are set: M_ACTIVE_PROCEDURES keeps the specified numbers
							of records for the specified amount of time</p>

					</li>

					<li class="li">
						<p class="p">Only <span class="keyword cmdname">NUMBER_OF_CALLS_TO_RETAIN_AFTER_EXECUTION</span> is set:
							M_ACTIVE_PROCEDURES keeps the specified number for the default amount of
							time ( = 3600 seconds)</p>

					</li>

					<li class="li">
						<p class="p">Only <span class="keyword cmdname">RETENTION_PERIOD_FOR_SQLSCRIPT_CONTEXT </span>is set:
							M_ACTIVE_PROCEDURES keeps the default number of records ( = 100) for the
							specified amount of time </p>

					</li>

					<li class="li">
						<p class="p">Nothing set: no records are kept. </p>

					</li>

				</ul>

			</div>

			<div class="p">
				<div class="note note"><span class="notetitle">Note</span> 
					<p class="p">All configuration parameters needs to be defined under the
							<span class="keyword cmdname">sqlscript</span> section</p>

				</div>

			</div>

		</div>
</div>
</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="M_ACTIVE_PROCEDURES";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>