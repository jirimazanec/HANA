<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content="Rounds a specified value to the series value using a specified increment."/>
<meta name="description" content="Rounds a specified value to the series value using a specified increment."/>
<meta name="keywords" content="SERIES_ROUND"/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=3393073674177649"/>
<title>SERIES_ROUND Function (Series Data)</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loio435ec476ab494ad6b8409f22abec13fe";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loio435ec476ab494ad6b8409f22abec13fe">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">SERIES_ROUND Function (Series Data)</h1>

	
	
	
	
	<div class="body refbody"><p class="shortdesc">Rounds a specified value to the series value using a specified increment.</p>

		<div class="section"><div class="section_title">Syntax</div><div type="Syntax">
			
			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">SERIES_ROUND (<var class="keyword varname">&lt;value&gt;</var>, {<var class="keyword varname">&lt;increment_by&gt;</var>
    | SERIES TABLE <var class="keyword varname">&lt;series_table&gt;</var>} [, <var class="keyword varname">&lt;rounding_mode&gt;</var> [, <var class="keyword varname">&lt;alignment_expression&gt;</var>]])</pre></div>

		</div></div>

		<div class="section"><div class="section_title">Syntax Elements</div><div type="Syntax Elements">
			
			<dl class="dl parml">
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;value&gt;</var></dt>

					<dd class="dd pd">Specifies that the value parameter can either be a numeric value or a
						date/time type.
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;value&gt;</var> ::= <var class="keyword varname">&lt;real_const&gt;</var> | <var class="keyword varname">&lt;datetime_const&gt;</var></pre></div>
</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;increment_by&gt;</var></dt>

					<dd class="dd pd">If the <var class="keyword varname">&lt;value&gt;</var> parameter is numeric, then the
							<var class="keyword varname">&lt;increment_by&gt;</var> value must be a numeric value that
						defines the period of the
							series.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;increment_by&gt;</var>::= <var class="keyword varname">&lt;interval_const&gt;</var></pre></div>
<p class="p">
							If the <var class="keyword varname">&lt;value&gt;</var> parameter is a date/time type, then the
								<var class="keyword varname">&lt;increment_by&gt;</var> value must be a string of the form
							"INTERVAL number units" where units is either YEAR, MONTH, DAY, HOUR,
							MINUTE, or SECOND and the number must be an integer, unless the unit
							type is SECOND and the associated data type is TIMESTAMP.</p>
</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;series_table&gt;</var></dt>

					<dd class="dd pd">Specifies that the maximum and minimum values in a provided series table are used to
						calculate the rounded values.
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;series_table&gt;</var> ::= <var class="keyword varname">&lt;identifier&gt;</var></pre></div>
<p class="p">If
							a SERIES TABLE reference is specified, then the
								<var class="keyword varname">&lt;increment_by&gt;</var> value is retrieved from the series
							descriptor of that table. This series must be equidistant.</p>
</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;rounding_mode&gt;</var></dt>

					<dd class="dd pd">Specifies that the natural zero that serves as the basis for the rounding depends on the
						data type and interval.
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;rounding_mode&gt;</var> ::= ROUND_HALF_UP
 | ROUND_HALF_DOWN
 | ROUND_HALF_EVEN
 | ROUND_UP
 | ROUND_DOWN
 | ROUND_CEILING
 | ROUND_FLOOR</pre></div>
<p class="p">For
							numeric types, zero is the numeric zero. For date types with the
							interval units of DAY or smaller, zero is midnight. For MONTH and YEAR
							intervals, zero is midnight on the first day of the month, and midnight
							on the first day of the year, respectively. The following rounding modes
							are supported:</p>

<div class="table-wrapper tablenoborder"><table summary="" id="loio435ec476ab494ad6b8409f22abec13fe__table_v55_h4b_zp" class="table" frame="border" border="1" rules="all">
<colgroup><col width="50%"/><col width="50%"/></colgroup>

								
								
								<tbody class="tbody">
									<tr class="row">
										<td class="entry" valign="top"><strong class="ph b">Mode </strong></td>

										<td class="entry" valign="top"><strong class="ph b">Description </strong></td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_HALF_UP </td>

										<td class="entry" valign="top">Specifies the default value. The value is rounded to
											the nearest series value. Values that fall halfway
											between two series values are rounded up, away from
											zero.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_HALF_DOWN </td>

										<td class="entry" valign="top">Specifies that the value is rounded to the nearest
											series value. Values that fall halfway between two round
											values are rounded down, toward zero.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_HALF_EVEN </td>

										<td class="entry" valign="top">Specifies that the value is rounded to the nearest
											series value. Values that fall halfway between two
											rounded values are rounded to the even series value,
											based on element number.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_UP </td>

										<td class="entry" valign="top">Specifies that the value is always rounded away from
											zero to the larger series value.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_DOWN </td>

										<td class="entry" valign="top">Specifies that the value is always rounded toward
											zero to the smaller series value.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_CEILING </td>

										<td class="entry" valign="top">Specifies that the value is always rounded in a
											positive direction to the larger series value.</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top">ROUND_FLOOR </td>

										<td class="entry" valign="top">Specifies that the value is always rounded in a
											negative direction to the smaller series value.</td>

									</tr>

								</tbody>

							</table>
</div>
</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;alignment_expression&gt;</var></dt>

					<dd class="dd pd">Specifies that this parameter must be convertible to the <var class="keyword varname">&lt;value&gt;</var> data
						type.
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;alignment_expression&gt;</var> ::= <var class="keyword varname">&lt;real_const&gt;</var> | <var class="keyword varname">&lt;datetime_const&gt;</var></pre></div>
A
							<var class="keyword varname">&lt;rounding_mode&gt;</var> must be specified when using this
						parameter.</dd>

				
			</dl>

		</div></div>

		<div class="section"><div class="section_title">Description</div><div type="Description">
			
			<p class="p">Rounds the value to the series value defined by the <var class="keyword varname">&lt;increment_by&gt;</var>
				parameter. </p>

		</div></div>

		<div class="section"><div class="section_title">Examples</div><div type="Examples">
			
			<div class="p">The example below horizontally aggregates a series table by using the ROUND_DOWN
				mode:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLUMN TABLE ExampleSeriesTable(
    sid INTEGER NOT NULL,
    ts TIMESTAMP NOT NULL,
    val DOUBLE)
    SERIES(SERIES KEY(sid) PERIOD FOR SERIES(ts)
        EQUIDISTANT INCREMENT BY INTERVAL 60 SECOND);

SELECT rounded.sid, week, AVG(val) AS weekly_avg FROM(
    SELECT t.sid, SERIES_ROUND(ts, 'INTERVAL 7 DAY', ROUND_DOWN)
        AS week, val FROM ExampleSeriesTable AS t
    ) AS rounded
    GROUP BY rounded.sid, week;</pre></div>
</div>

			<div class="p">The fictitious example below illustrates another way to perform horizontal aggregation, using
				the fictional table DailyWeather:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">INSERT INTO DailyWeather(id, date, avg_temp)
    SELECT id, SERIES_ROUND(ts, SERIES TABLE DailyWeather) date, AVG(temp)
    FROM HourlyWeather
    GROUP BY id, SERIES_ROUND(ts, SERIES TABLE DailyWeather)
    ORDER BY 1, 2;</pre></div>
</div>

			<div class="p">The example below illustrates different ways of aggregating data when moving from narrower to
				wider
				intervals:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLUMN TABLE SampleSensorData (
    machine_id varchar(10),
    ts timestamp,
    power_consumption double,
    flow_rate double,
    primary key(machine_id, ts))
SERIES (
    SERIES KEY(machine_id)
    PERIOD FOR SERIES(ts)
    EQUIDISTANT INCREMENT BY INTERVAL 1 MINUTE MISSING ELEMENTS ALLOWED);

-- Going from 1 minute to 1 day using Standard SQL:
SELECT machine_id,
    TO_DATE(YEAR(ts) || '-' || MONTH(ts) || '-' || DAYOFMONTH(ts),
        'YYYY-MM-DD') AS ts,
    SUM(power_consumption) AS power_consumption
    FROM SampleSensorData
    GROUP BY machine_id, YEAR(ts), MONTH(ts), DAYOFMONTH(ts);

-- Going from 1 minute to 15 minutes using SERIES_ROUND:
SELECT machine_id, ts AS original_ts,
    SERIES_ROUND(ts, 'INTERVAL 15 MINUTE', ROUND_FLOOR) AS rounded_ts
        FROM SampleSensorData
        WHERE machine_id = 'EQ42-P01'
        ORDER BY ts;

-- Going from 1 minute to 15 minutes using SERIES_ROUND (variant #1)
SELECT machine_id, ts, SUM(power_consumption) AS power_consumption
    FROM (
        SELECT machine_id, SERIES_ROUND(ts, 'INTERVAL 15 MINUTE', ROUND_FLOOR)
            AS ts, power_consumption
            FROM SampleSensorData
    )
    GROUP BY machine_id, ts
    ORDER BY machine_id, ts;

-- Going from 1 minute to 15 minutes using SERIES_ROUND (variant #2)
SELECT machine_id, SERIES_ROUND(ts, 'INTERVAL 15 MINUTE', ROUND_FLOOR)
    AS ts, sum(power_consumption) AS power_consumption
    FROM SampleSensorData
    GROUP BY machine_id, SERIES_ROUND(ts, 'INTERVAL 15 MINUTE', ROUND_FLOOR);</pre></div>
</div>

			<div class="p">The example below shows how to round up 4.5 to a series incremented by 3. It returns the
				result
				<samp class="ph systemoutput">6</samp>:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">SELECT SERIES_ROUND(4.5, 3, ROUND_HALF_UP) "result" FROM DUMMY;</pre></div>
</div>

			<div class="p">The example below shows how to round down 4.5 to a series incremented by 3. The example below
				shows returns the result <samp class="ph systemoutput">3</samp>:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">SELECT SERIES_ROUND(4.5, 3, ROUND_HALF_DOWN) "result" FROM DUMMY;</pre></div>
</div>

			<div class="p">The previous example could be written as follows in the  fictitious example below to refer to
				an equidistant series table:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLUMN TABLE ExampleSeriesTable(id INTEGER, pos INTEGER)
    SERIES(SERIES KEY(id) EQUIDISTANT INCREMENT BY 3 PERIOD FOR SERIES(pos));

SELECT SERIES_ROUND(4.5, SERIES TABLE ExampleSeriesTable, ROUND_HALF_DOWN)
    "result" FROM DUMMY;</pre></div>
</div>

			<div class="p">The example below shows how to round down a date to the beginning of the year. It returns the
				result <samp class="ph systemoutput">Jan 1, 2013</samp>:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">SELECT SERIES_ROUND('2013-05-24', 'INTERVAL 1 YEAR', ROUND_DOWN) "result"
    FROM DUMMY;</pre></div>
</div>

			<div class="p">The example below shows how to round up a time to the next 10 minute interval. It returns the
					result<samp class="ph systemoutput"> 4:30:00 AM</samp>:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">SELECT SERIES_ROUND('04:25:01', 'INTERVAL 10 MINUTE') "result" FROM DUMMY;</pre></div>
</div>

		</div></div>

	</div>

</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="SERIES_ROUND Function (Series Data)";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>