<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content="Updates JSON documents in a collection table."/>
<meta name="description" content="Updates JSON documents in a collection table."/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=29688799854659753"/>
<title>UPDATE Statement (JSON Document Store)</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loio8f3a3bf0a2c44099acf355004c665d80";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loio8f3a3bf0a2c44099acf355004c665d80">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">UPDATE Statement (JSON Document Store)</h1>

	
	<div class="body refbody"><p class="shortdesc">Updates JSON documents in a collection table.</p>

		<div class="section"><div class="section_title">Syntax</div><div type="Syntax">
			
			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">UPDATE <var class="keyword varname">&lt;collection_name&gt;</var> 
 [ <var class="keyword varname">&lt;set_or_unset_field_clause&gt;</var> ]
 [ <var class="keyword varname">&lt;set_or_unset_array_clause&gt;</var> ]
 [ <var class="keyword varname">&lt;rename_clause&gt;</var> ]</pre></div>

		</div></div>

		<div class="section"><div class="section_title">Syntax Elements</div><div type="Syntax Elements">
			
			<dl class="dl parml">
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;collection_name&gt;</var></dt>

					<dd class="dd pd">
						<p class="p">Specifies the name of the collection table to update.</p>

						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;collection_name&gt;</var> ::= [[<var class="keyword varname">&lt;database_name&gt;</var>.]<var class="keyword varname">&lt;schema_name&gt;</var>.]<var class="keyword varname">&lt;identifier&gt;</var></pre></div>

					</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;set_or_unset_field_clause&gt;</var></dt>

					<dd class="dd pd">
						<p class="p">Sets the value for a field, or unsets a field and value. Specify a WHERE clause to filter
							where the changes are applied in the document.</p>

						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;set_unset_field_clause&gt;</var> ::= {<var class="keyword varname">&lt;set_field&gt;</var> | <var class="keyword varname">&lt;unset_field&gt;</var>}

<var class="keyword varname">&lt;set_field&gt;</var> ::=
 SET <var class="keyword varname">&lt;path_expression&gt;</var> = <var class="keyword varname">&lt;value&gt;</var> [,...] [WHERE <var class="keyword varname">&lt;filter_clause&gt;</var>]

<var class="keyword varname">&lt;unset_field&gt;</var> ::= UNSET <var class="keyword varname">&lt;path_expression&gt;</var></pre></div>

						<dl class="dl">
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;path_expression&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies a field to update the value for. If <var class="keyword varname">&lt;path_expression&gt;</var> exists,
										then the value is overwritten with the new value. </p>

								</dd>

							
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;value&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies a value to set for <var class="keyword varname">&lt;path_expression&gt;</var>.</p>

								</dd>

							
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;filter_clause&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies filtering criteria for when to apply the update.
									</p>

								</dd>

							
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;unset_field&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies a field to unset. Unsetting a field is the equivalent to deleting it from the
										document.</p>

								</dd>

							
						</dl>

					</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;set_unset_array_clause&gt;</var></dt>

					<dd class="dd pd">
						<p class="p">Specifies an array to set or unset values for.</p>

						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;set_or_unset_array_clause&gt;</var> ::= { <var class="keyword varname">&lt;set_array&gt;</var> | <var class="keyword varname">&lt;unset_array&gt;</var> }

<var class="keyword varname">&lt;set_array&gt;</var> ::= SET <var class="keyword varname">&lt;array_position&gt;</var> = <var class="keyword varname">&lt;value&gt;</var>
<var class="keyword varname">&lt;unset_array&gt;</var> ::= UNSET <var class="keyword varname">&lt;array_position&gt;</var></pre></div>

						<dl class="dl">
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;array_position&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies the position of a value to update in the array (for example,
											<samp class="ph codeph">myArray[3]</samp> is position 3 of the array
											<kbd class="ph userinput">myArray</kbd>).</p>

								</dd>

							
							
								<dt class="dt dlterm emphasis"><var class="keyword varname">&lt;value&gt;</var></dt>

								<dd class="dd">
									<p class="p">Specifies the new value to set at <var class="keyword varname">&lt;array_position&gt;</var>.</p>

								</dd>

							
							
								<dt class="dt dlterm emphasis">UNSET</dt>

								<dd class="dd">
									<p class="p">Unsets the value at <var class="keyword varname">&lt;array_position&gt;</var>.</p>

								</dd>

							
						</dl>

					</dd>

				
				
					<dt class="dt pt dlterm emphasis"><var class="keyword varname">&lt;rename_clause&gt;</var></dt>

					<dd class="dd pd">
						<p class="p">Specifies a new name for a field.</p>

						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><var class="keyword varname">&lt;rename_clause&gt;</var> ::= RENAME <var class="keyword varname">&lt;old_field_name&gt;</var> TO <var class="keyword varname">&lt;new_field_name&gt;</var></pre></div>

						<p class="p">If <var class="keyword varname">&lt;old_field_name&gt;</var> does not exist, then the document remains unchanged.
							If <var class="keyword varname">&lt;new_field_name&gt;</var> already exists, then an error is
							returned.</p>

					</dd>

				
			</dl>

		</div></div>

		<div class="section"><div class="section_title">Description</div><div type="Description">
			
			<p class="p">Use the UPDATE COLLECTION statement to set and unset fields, change field values, and rename
				fields in JSON documents. You can specify as many SET, UNSET, and RENAME clauses as
				you need, and order is not significant.</p>

			<p class="p">When using <var class="keyword varname">&lt;set_field_clause&gt;</var>, if any identifier in
					<var class="keyword varname">&lt;field_name&gt;</var> does not exist, then the update operation creates
				it and sets it as specified. </p>

		</div></div>

		<div class="section"><div class="section_title">Examples</div><div type="Examples">
			
			<p class="p">The following statements create a collection table and insert JSON documents into it
				for use with the remaining examples in this topic.</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLLECTION OverSeasContacts;
INSERT INTO OverSeasContacts VALUES ('{ "firstname":"John", "lastname":"Smith", "age":45, "address": { "street": "Dietmar-Hopp-Allee", "city": "Heidelberg" } }');
INSERT INTO OverSeasContacts VALUES ('{ "firstname":"Amy", "lastname":"Jones", "age":31, "address": { "city": "Walldorf" } }');
INSERT INTO OverSeasContacts VALUES ('{ "firstname":"Elizabeth", "lastname":"Peterson", "age":19, "address": { "street": "Dietmar-Hopp-Allee", "city": "Heidelberg" } }');
INSERT INTO OverSeasContacts VALUES ('{ "firstname":"Carl", "lastname":"Patel", "age":21, "address": { "street": "", "city": "Walldorf" } }');
INSERT INTO OverSeasContacts VALUES ('{ "firstname":"Roger", "lastname":"Schroeder", "age":77, "address": { "street": "Dietmar-Hopp-Allee", "city": "Heidelberg" } }');
</pre></div>

			<p class="p">The following example updates <kbd class="ph userinput">"address"."street"</kbd> to
					<kbd class="ph userinput">"Hauptstra√üe"</kbd> for rows where
					<kbd class="ph userinput">"address"."city"</kbd> is set to
					<kbd class="ph userinput">"Walldorf"</kbd>:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">UPDATE OverSeasContacts SET "address"."street" = 'Hauptstra√üe' WHERE "address"."city" = 'Walldorf';
SELECT * FROM OverSeasContacts WHERE "address"."city" = 'Walldorf';</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_tfb_4lm_sy" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e353" class="stentry">
						<p class="p">OVERSEASCONTACTS</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e353" class="stentry">
						<p class="p">{"firstname": "Amy", "lastname": "Jones", "age": 31, "address": {"city":
							"Walldorf", "street": "Hauptstra√üe"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e353" class="stentry">
						<p class="p">{"firstname": "Carl", "lastname": "Patel", "age": 21, "address":
							{"street": "Hauptstra√üe", "city": "Walldorf"}}</p>

					</td>

				</tr>
</table></div>

			<p class="p">The following example unsets <kbd class="ph userinput">"address"."street"</kbd> for rows where
					<kbd class="ph userinput">"address"."city"</kbd> is
				<kbd class="ph userinput">"Heidelberg"</kbd>:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">UPDATE OverSeasContacts UNSET "address"."street" WHERE "address"."city" = 'Heidelberg';
SELECT * FROM OverSeasContacts WHERE "address"."city" = 'Heidelberg';</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_hjx_bwd_5y" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e398" class="stentry">
						<p class="p">OVERSEASCONTACTS</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e398" class="stentry">
						<p class="p">{"firstname": "John", "lastname": "Smith", "age": 45, "address": {"city":
							"Heidelberg"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e398" class="stentry">
						<p class="p">{"firstname": "Elizabeth", "lastname": "Peterson", "age": 19, "address":
							{"city": "Heidelberg"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e398" class="stentry">
						<p class="p">{"firstname": "Roger", "lastname": "Schroeder", "age": 77, "address":
							{"city": "Heidelberg"}}</p>

					</td>

				</tr>
</table></div>

			<p class="p">The following example changes the <kbd class="ph userinput">"street"</kbd> key to
					<kbd class="ph userinput">"street name"</kbd>:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">UPDATE OverSeasContacts RENAME "address"."street" TO "address"."street name";
SELECT * FROM OverSeasContacts;</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_bdp_wxd_5y" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e450" class="stentry">
						<p class="p">OVERSEASCONTACTS</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e450" class="stentry">
						<p class="p">{"firstname": "John", "lastname": "Smith", "age": 45, "address": {"city":
							"Heidelberg"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e450" class="stentry">
						<p class="p">{"firstname": "Amy", "lastname": "Jones", "age": 31, "address": {"city":
							"Walldorf", "street name": "Hauptstra√üe"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e450" class="stentry">
						<p class="p">{"firstname": "Elizabeth", "lastname": "Peterson", "age": 19, "address":
							{"city": "Heidelberg"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e450" class="stentry">
						<p class="p">{"firstname": "Carl", "lastname": "Patel", "age": 21, "address": {"street
							name": "Hauptstra√üe", "city": "Walldorf"}}</p>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e450" class="stentry">
						<p class="p">{"firstname": "Roger", "lastname": "Schroeder", "age": 77, "address":
							{"city": "Heidelberg"}}</p>

					</td>

				</tr>
</table></div>

			<p class="p">The following example sets a value for <kbd class="ph userinput">ARR[2]</kbd> (position 2 in
				array ARR) for JSON documents where <kbd class="ph userinput">"age"</kbd> is greater than
				30:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLLECTION myCollection1;
INSERT INTO myCollection1 VALUES ('{ "age":22, "ARR": ["a", "b", "c", "d"] }');
INSERT INTO myCollection1 VALUES ('{ "age":44, "ARR": ["a", "b", "c", "d"] }');

UPDATE myCollection1 SET "ARR"[2] = 'newValue' WHERE "age"&gt;30;

SELECT * FROM myCollection1;</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_rvp_wjw_vy" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e520" class="stentry">
						<p class="p">MYCOLLECTION1</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e520" class="stentry">
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">{"age": 22, "ARR": ["a", "b", "c", "d"]}</pre></div>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e520" class="stentry">
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">{"age": 44, "ARR": ["a", "newValue", "c", "d"]}</pre></div>

					</td>

				</tr>
</table></div>

			<p class="p">The following
				example shows how to unset a field in an array: </p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLLECTION myCollection1;
INSERT INTO myCollection1 VALUES ('{ "age":22, "ARR": ["a", "b", "c", "d"] }');
INSERT INTO myCollection1 VALUES ('{ "age":44, "ARR": ["a", "b", "c", "d"] }');

UPDATE myCollection1 UNSET "ARR"[2] WHERE "age"&gt;30;

SELECT * FROM myCollection1;</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_e5h_tkw_vy" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e560" class="stentry">
						<p class="p">MYCOLLECTION1</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e560" class="stentry">
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">{ "age":44, "ARR": ["a", "c", "d"] }</pre></div>

					</td>

				</tr>
</table></div>

			
			<p class="p"><span class="ph emphasis emphasis">Example for <var class="keyword varname">&lt;rename_clause&gt;</var>:</span> The following
				fictitious example shows how to rename a field:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">CREATE COLLECTION myCollection1;
INSERT INTO myCollection1 VALUES ('{ "firstname":"John", "lastname":"Smith", "age":45, "address": { "street": "Dietmar-Hopp-Allee", "city": "Heidelberg" } }');
INSERT INTO myCollection1 VALUES ('{ "firstname":"Amy", "lastname":"Jones", "age":31, "address": { "street": "Hauptstra√üe", "city": "Walldorf" } }');
UPDATE myCollection1 RENAME "address"."street" TO "address"."street name";
SELECT * FROM myCollection1;</pre></div>

			<div class="table-wrapper"><table summary="" id="loio8f3a3bf0a2c44099acf355004c665d80__simpletable_ozb_qlw_vy" border="1" class="simpletable"><tr class="sthead">
					<th valign="bottom" align="left" id="d27163219e594" class="stentry">
						<p class="p">MYCOLLECTION1</p>

					</th>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e594" class="stentry">
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">{"firstname": "John", "lastname": "Smith", "age": 45, "address": {"street name": "Dietmar-Hopp-Allee", "city": "Heidelberg"}}</pre></div>

					</td>

				</tr>
<tr class="strow">
					<td valign="top" headers="d27163219e594" class="stentry">
						<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">{"firstname": "Amy", "lastname": "Jones", "age": 31, "address": {"street name": "Hauptstra√üe", "city": "Walldorf"}}</pre></div>

					</td>

				</tr>
</table></div>

		</div></div>

	</div>

</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="UPDATE Statement (JSON Document Store)";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>