<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content="Create script-based calculation views to depict complex calculation scenarios by writing SQL script statements. It is a viable alternative to depict complex business scenarios, which you cannot achieve by creating graphical calculation views."/>
<meta name="description" content="Create script-based calculation views to depict complex calculation scenarios by writing SQL script statements. It is a viable alternative to depict complex business scenarios, which you cannot achieve by creating graphical calculation views."/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=2480092975864574"/>
<title>Create Script-Based Calculation Views</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loio71ba86c33a854a39b91f726f30571297";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loio71ba86c33a854a39b91f726f30571297">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Create Script-Based Calculation Views</h1>

	
	<div class="body taskbody"><p class="shortdesc">Create script-based calculation views to depict complex calculation scenarios by writing
		SQL script statements. It is a viable alternative to depict complex business scenarios,
		which you cannot achieve by creating graphical calculation views.</p>

		<div class="section context"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Context</h2></div>
			<p class="p">For example, if you want to create calculation views that require certain SQL functions (i.e.
				window), or predictive functions (i.e. R-Lang), then you use script-based
				calculation views. Sufficient knowledge of SQL scripting including the behavior and
				optimization characteristics of the different data models is a prerequisite for
				creating script-based calculation views.</p>

		</div>
		<div class="ol steps tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand">
				<span class="ph cmd">Open the SAP HANA Web-based Development Workbench Editor.</span>
				<div class="itemgroup info">The Web-based Editor tool is available on the <span class="ph pname">SAP HANA</span> XS Web server at the
					following URL:
							<span class="ph filepath">http://<var class="keyword varname">&lt;WebServerHost&gt;</var>:80<var class="keyword varname">&lt;SAPHANAinstance&gt;</var>/sap/hana/ide/editor</span>.</div>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">In the navigator, select a package where you want to create the new calculation view.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">In the context menu of the package, select <span class="ph menucascade"><img src="images/navstart.gif" alt="Start of the navigation path" title="Start of the navigation path"/> <span class="ph uicontrol">New </span> <img src="images/navstep.gif" alt="Next navigation step" title="Next navigation step"/> <span class="ph uicontrol">Calculation View</span> <img src="images/navend.gif" alt="End of the navigation path" title="End of the navigation path"/></span>.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Provide a name and description.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Select the <span class="ph uicontrol">Script</span> radio button.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Choose <span class="ph uicontrol">Create</span>.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Select default schema</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_g4w_pkd_fs">
					<li class="li substep substepexpand">
						<span class="ph cmd">Select the <span class="ph uicontrol">Semantics</span> node.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Choose the <span class="ph uicontrol">View Properties</span> tab.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">In the <span class="ph uicontrol">Default Schema</span> dropdown list, select the
							default schema.</span>
						<div class="itemgroup info">
							<div class="note note"><span class="notetitle">Note</span> If you do not select a default schema while scripting, then you
								need to provide fully qualified names of the objects used. </div>

						</div>
					</li>

				</ol>

			</li>
<li class="li step stepexpand">
				<span class="ph cmd">If you want to create and add new columns to the output, then in the
						<span class="ph uicontrol">Columns</span> pane, create new columns by typing the column
					name and its data type using the syntax col_name&gt;:&lt;data_type&gt;.</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_drb_nwm_wp">
					<li class="li substep substepexpand">
						<span class="ph cmd">If you want to edit or define additional properties to these columns,
							then choose the <span class="ph uicontrol">Columns</span> tab.</span>
						<div class="itemgroup info">For example, you can mark columns as attributes or measures, assign semantics, assign
							variables and so on.</div>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Define required additional properties.</span>
					</li>

				</ol>

			</li>
<li class="li step stepexpand">
				<span class="ph cmd">If you want to create or add new input parameters of type <span class="ph uicontrol">Direct</span> to
					the output, then in the <span class="ph uicontrol">Parameters</span> pane, create new
					parameters using the syntax &lt;parameter_name&gt;:&lt;data_type&gt;.</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_nfn_twm_wp">
					<li class="li substep substepexpand">
						<span class="ph cmd">If you want to edit or define additional properties on these
							parameters, then choose <span class="ph uicontrol">Parameters/Variables</span>
							tab.</span>
						<div class="itemgroup info">For example, you can create new parameters or variables, manage parameter mappings,
							choose parameter or variable types, assign semantics and so on.</div>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Define additional required properties. </span>
					</li>

				</ol>

				<div class="itemgroup info">
					<div class="note note"><span class="notetitle">Note</span> The defined order and data types of columns and parameters must match with the order and
						data types of the columns and parameters in the select query, which is
						assigned to the output function var_out.</div>

				</div>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">If you want to add multiple columns that are part of existing information views
					or catalog tables or table functions to the output structure of script-based
					calculation views, then:</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_ywr_z3w_vp">
					<li class="li substep substepexpand">
						<span class="ph cmd">In the <span class="ph uicontrol">Columns</span> pane, choose <span class="ph uicontrol">Add
								Columns From</span>.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">In the<span class="ph uicontrol"> Available Columns</span> section, choose
								<span class="ph uicontrol">Add</span>.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Enter the name of the object that contains the columns you want to add
							to the output.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Select one or more objects from the dropdown list.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Choose <span class="ph uicontrol">OK</span>.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">In the <span class="ph uicontrol">Available Columns</span> pane, select the
							columns that you want to add to the output.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">If you want to add all columns of an object to the output, then select
							the object.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Choose <img class="image" id="loio71ba86c33a854a39b91f726f30571297__image_fbk_dtr_fs" src="loio6eb4a5e95fb649a79b0d9ce4670f3e80_LowRes.png"/>.</span>
						<div class="itemgroup info">
							<div class="note note"><span class="notetitle">Note</span> For all duplicate column names in the <span class="ph uicontrol">Select
									Columns</span> pane, the modeler displays an error. You
								cannot add two columns with the same name to your output. If you
								want to retain both the columns, then change the name of columns in
								the <span class="ph uicontrol">Target</span> pane before you add them to the
								output.</div>

						</div>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">If you want to override the existing output structure, select
								<span class="ph uicontrol">Replace existing output columns in the
							Output</span>.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Choose <span class="ph uicontrol">OK</span>.</span>
					</li>

				</ol>

			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Write the SQL Script statements to fill the output columns.</span>
			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Activate the calculation view.</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_tb4_w43_cs">
					<li class="li substep">
						<span class="ph cmd">If you want to activate the calculation view, in the menu bar, choose
								<span class="ph uicontrol">Save</span>.</span>
					</li>

					<li class="li substep">
						<span class="ph cmd">If you want to activate the calculation view along with all objects, in
							the menu bar, choose <span class="ph uicontrol">Save All</span>.</span>
					</li>

				</ol>

			</li>
<li class="li step stepexpand">
				<span class="ph cmd">Assign changes.</span>
				<ol type="a" class="ol substeps" id="loio71ba86c33a854a39b91f726f30571297__substeps_lg5_wsd_fs">
					<li class="li substep substepexpand">
						<span class="ph cmd">In the navigator toolbar, choose the <img class="image" id="loio71ba86c33a854a39b91f726f30571297__image_ikg_r21_xp" src="loioc38a56509f17409cad7789e74812cf09_LowRes.png"/> icon or the keyboard
							shortcut <kbd class="key">Ctrl</kbd> + <kbd class="key">S</kbd> to save and activate your
							calculation view.</span>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">In the open change list, select a change ID that you want to use to
							assign your changes.</span>
						<div class="itemgroup info">
							<div class="note note"><span class="notetitle">Note</span> The change list appears only if you have enabled change tracking
								for your SAP HANA system.</div>

						</div>
					</li>

					<li class="li substep substepexpand">
						<span class="ph cmd">Choose <span class="ph uicontrol">Assign</span>.</span>
					</li>

				</ol>

			</li>
</ol>

		<div class="section postreq"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Next Steps</h2></div>After creating a script-based calculation view, you can perform certain additional tasks
			to obtain the desired output. The table below lists the additional tasks that you can
			perform to enrich the calculation view.
<div class="table-wrapper tablenoborder"><table summary="" id="loio71ba86c33a854a39b91f726f30571297__table_fkj_12f_fs" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1: Working With Attributes and Measures</span></caption>
<colgroup><col width="69.51219512195121%"/><col width="30.48780487804878%"/></colgroup>

					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="69.51219512195121%" id="d630075e417">Requirement</th>

							<th class="entry" valign="top" width="30.48780487804878%" id="d630075e420">Task to perform</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want to assign semantic types to provide more meaning to attributes and
								measures in calculation views.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Assign Semantics</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want to parameterize calculation views and execute them based on the values
								users provide at query runtime.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Create Input Parameters</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want to, for example, filter the results based on the
								values that users provide to attributes at runtime.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Assign Variables</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want associate measures with currency codes and perform
								currency conversions.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Associate Measures with Currency</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want associate measures with unit of measures and perform
								unit conversions.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Associate Measures with Unit of Measure</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want to create level hierarchies to organize data in
								reporting tools.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Create Level Hierarchies</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">If you want to create parent-child hierarchies to organize data
								in reporting tools.</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">Create Parent-Child Hierarchies</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.51219512195121%" headers="d630075e417 ">
								<p class="p">If you want to group related measures together in a folder.</p>

							</td>

							<td class="entry" valign="top" width="30.48780487804878%" headers="d630075e420 ">
								<p class="p">Group Related Measures.</p>

							</td>

						</tr>

					</tbody>

				</table>
</div>

<div class="table-wrapper tablenoborder"><table summary="" id="loio71ba86c33a854a39b91f726f30571297__table_zql_12f_fs" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2: Working With Calculation View Properties</span></caption>
<colgroup><col width="69.23076923076923%"/><col width="30.76923076923077%"/></colgroup>

					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" valign="top" width="69.23076923076923%" id="d630075e523">Requirement</th>

							<th class="entry" valign="top" width="30.76923076923077%" id="d630075e526">Task to perform</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" valign="top" width="69.23076923076923%" headers="d630075e523 ">If you want to filter the view data either using a fixed client
								value or using a session client set for the user.</td>

							<td class="entry" valign="top" width="30.76923076923077%" headers="d630075e526 ">Filter Data for Specific Clients</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.23076923076923%" headers="d630075e523 ">If you want to execute time travel queries on calculation views. </td>

							<td class="entry" valign="top" width="30.76923076923077%" headers="d630075e526 ">Enable Calculation Views for Time Travel Queries</td>

						</tr>

						<tr class="row">
							<td class="entry" valign="top" width="69.23076923076923%" headers="d630075e523 ">If you want to invalidate or remove data from the cache after
								specific time intervals.</td>

							<td class="entry" valign="top" width="30.76923076923077%" headers="d630075e526 ">Invalidate Cached Content</td>

						</tr>

					</tbody>

				</table>
</div>
</div>
	</div>

	<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="default.html?77da4b9b6da54529bc699f3338617e81.html" target="_top" title="Calculation views contain variables that are bound to specific attributes within the calculation view. Variables are runtime filters that help to filter attributes, based on values that users provide.">Assign Variables</a></div>
<div><a class="link" href="default.html?a172fa29c63e4881832530e24c9ed10a.html" target="_top" title="Input parameters helps you parameterize calculation views and execute them based on the values you provide to the input parameters at query runtime. The engine considers input parameters as the PLACEHOLDER clause of the SQL statement.">Create Input Parameters</a></div>
<div><a class="link" href="default.html?7b8813b65db3499fadc8f107cbd042ec.html" target="_top" title="In level hierarchies each level represents a position in the hierarchy. For example, a time dimension can have a hierarchy that represents data at the month, quarter, and year levels.">Create Level Hierarchies</a></div>
<div><a class="link" href="default.html?5ebe3d67931d46b1b6d9e3009c740cf6.html" target="_top" title="In parent-child hierarchies, you use a parent attribute that determines the relationship among the view attributes. Parent-child hierarchies have elements of the same type and do not contain named levels.">Create Parent-Child Hierarchies</a></div>
<div><a class="link" href="default.html?e9c930218b784dd68b71ed1ca30ad84f.html" target="_top" title="In your analytic views or calculation views, if you are using multiple measures and if you want to organize them, for example, to segregate the planned measures with the actual measures, then you can create a folder and group all related measures within this folder.">Group Related Measures</a></div>
<div><a class="link" href="default.html?2175374c28a84f69ab125feb71a78ef7.html" target="_top" title="Obtain data from all clients or filter the calculation view data either with fixed client value or with session client value set for the user.">Filter Data for Specific Clients</a></div>
<div><a class="link" href="default.html?ef9eef50b2b14fd3b4e3c8a2e6611351.html" target="_top" title="Time travel queries are queries against the historical states of the database. When you execute a time travel query on your information view, you can query the data at a specified time in past.">Enable Calculation Views for Time Travel Queries</a></div>
<div><a class="link" href="default.html?fdb3c7d5f6174837a62aeff37eb89570.html" target="_top" title="In order to maintain the significance of data cached for your calculation views, the tool supports time-based cache invalidation and transaction-based cache invalidation.">Invalidate Cached Content</a></div>
</div>
</div>
</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="Create Script-Based Calculation Views";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>