<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=3604375467355917"/>
<title>Example: Dynamic Joins</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loio146a17ad521845fe8023f9c1c977562d";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loio146a17ad521845fe8023f9c1c977562d">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Example: Dynamic Joins</h1>

	
	<div class="body refbody"><p class="shortdesc"/>

		<div class="section">
			<p class="p">Consider that you want to evaluate the sales of a product and also calculate the sales share
				of each product using the below data sources.</p>

			<div class="p"><span class="ph emphasis emphasis">SALES</span><div class="table-wrapper"><table summary="" id="loio146a17ad521845fe8023f9c1c977562d__simpletable_pt2_klp_2s" border="1" class="simpletable"><tr class="sthead">
						<th valign="bottom" align="left" id="d95142e38" class="stentry" width="33.333333333333336%">
							<p class="p">REGION</p>

						</th>

						<th valign="bottom" align="left" id="d95142e44" class="stentry" width="33.333333333333336%">
							<p class="p">COUNTRY</p>

						</th>

						<th valign="bottom" align="left" id="d95142e50" class="stentry" width="33.333333333333336%">
							<p class="p">SALES</p>

						</th>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">IND</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">10</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">IND</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">10</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">CHN</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">20</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">CHN</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">50</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">DE</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">50</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">DE</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">100</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">UK</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">20</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e38" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e44" class="stentry">
							<p class="p">UK</p>

						</td>

						<td valign="top" headers="d95142e50" class="stentry">
							<p class="p">30</p>

						</td>

					</tr>
</table></div>
</div>

			<div class="p"><span class="ph emphasis emphasis">PRODUCT</span>
				<div class="table-wrapper"><table summary="" id="loio146a17ad521845fe8023f9c1c977562d__simpletable_nyg_hmp_2s" border="1" class="simpletable"><tr class="sthead">
						<th valign="bottom" align="left" id="d95142e235" class="stentry" width="33.333333333333336%">
							<p class="p">REGION</p>

						</th>

						<th valign="bottom" align="left" id="d95142e241" class="stentry" width="33.333333333333336%">
							<p class="p">COUNTRY</p>

						</th>

						<th valign="bottom" align="left" id="d95142e247" class="stentry" width="33.333333333333336%">
							<p class="p">PRODUCT</p>

						</th>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">IND</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD1</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">IND</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD2</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">CHN</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD1</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">CHN</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD2</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">DE</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD1</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">DE</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD2</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">UK</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD1</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e235" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e241" class="stentry">
							<p class="p">UK</p>

						</td>

						<td valign="top" headers="d95142e247" class="stentry">
							<p class="p">PROD2</p>

						</td>

					</tr>
</table></div>
</div>

			<p class="p">So you use a calculation view to join the above two data sources via two different aggregation
				nodes as inputs to the join node. The aggregation node with the data source
					<samp class="ph codeph">SALES</samp> does not have the <samp class="ph codeph">PRODUCT</samp> column but
				contains total sales for a given region or country.</p>

			<p class="p">Now assume that the two aggregation nodes are joined dynamically on the columns, REGION and
				COUNTRY. The outputs of the join node are columns REGION, PRODUCT, SALES and the
				calculated columns, TOT_SALES, and SALES_SHARE.</p>

			<p class="p">When you execute a client query on the calculation view to calculate the sales share of a
				product at a region level, the output from the dynamic join and static join is
				different:</p>

			<div class="p"><span class="ph emphasis emphasis">Dynamic Join</span><div class="table-wrapper"><table summary="" id="loio146a17ad521845fe8023f9c1c977562d__simpletable_t53_gnp_2s" border="1" class="simpletable"><tr class="sthead">
						<th valign="bottom" align="left" id="d95142e447" class="stentry" width="20%">
							<p class="p">REGION </p>

						</th>

						<th valign="bottom" align="left" id="d95142e453" class="stentry" width="20%">
							<p class="p">PRODUCT </p>

						</th>

						<th valign="bottom" align="left" id="d95142e459" class="stentry" width="20%">
							<p class="p">SALES </p>

						</th>

						<th valign="bottom" align="left" id="d95142e465" class="stentry" width="20%">
							<p class="p">TOT_SALES </p>

						</th>

						<th valign="bottom" align="left" id="d95142e471" class="stentry" width="20%">
							<p class="p">SALES_SHARE</p>

						</th>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e447" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e453" class="stentry">
							<p class="p">PROD1</p>

						</td>

						<td valign="top" headers="d95142e459" class="stentry">
							<p class="p">30</p>

						</td>

						<td valign="top" headers="d95142e465" class="stentry">
							<p class="p">90</p>

						</td>

						<td valign="top" headers="d95142e471" class="stentry">
							<p class="p">.33</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e447" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e453" class="stentry">
							<p class="p">PROD2</p>

						</td>

						<td valign="top" headers="d95142e459" class="stentry">
							<p class="p">60</p>

						</td>

						<td valign="top" headers="d95142e465" class="stentry">
							<p class="p">90</p>

						</td>

						<td valign="top" headers="d95142e471" class="stentry">
							<p class="p">.66</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e447" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e453" class="stentry">
							<p class="p">PROD1</p>

						</td>

						<td valign="top" headers="d95142e459" class="stentry">
							<p class="p">70</p>

						</td>

						<td valign="top" headers="d95142e465" class="stentry">
							<p class="p">200</p>

						</td>

						<td valign="top" headers="d95142e471" class="stentry">
							<p class="p">.35</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e447" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e453" class="stentry">
							<p class="p">PROD2</p>

						</td>

						<td valign="top" headers="d95142e459" class="stentry">
							<p class="p">130</p>

						</td>

						<td valign="top" headers="d95142e465" class="stentry">
							<p class="p">200</p>

						</td>

						<td valign="top" headers="d95142e471" class="stentry">
							<p class="p">.65</p>

						</td>

					</tr>
</table></div>
</div>

			<div class="p"><span class="ph emphasis emphasis">Static Join</span><div class="table-wrapper"><table summary="" id="loio146a17ad521845fe8023f9c1c977562d__simpletable_cnt_c4p_2s" border="1" class="simpletable"><tr class="sthead">
						<th valign="bottom" align="left" id="d95142e618" class="stentry" width="20%">
							<p class="p">REGION </p>

						</th>

						<th valign="bottom" align="left" id="d95142e624" class="stentry" width="20%">
							<p class="p">PRODUCT </p>

						</th>

						<th valign="bottom" align="left" id="d95142e630" class="stentry" width="20%">
							<p class="p">SALES </p>

						</th>

						<th valign="bottom" align="left" id="d95142e636" class="stentry" width="20%">
							<p class="p">TOT_SALES </p>

						</th>

						<th valign="bottom" align="left" id="d95142e642" class="stentry" width="20%">
							<p class="p">SALES_SHARE</p>

						</th>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e618" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e624" class="stentry">
							<p class="p">PROD1</p>

						</td>

						<td valign="top" headers="d95142e630" class="stentry">
							<p class="p">30</p>

						</td>

						<td valign="top" headers="d95142e636" class="stentry">
							<p class="p">90</p>

						</td>

						<td valign="top" headers="d95142e642" class="stentry">
							<p class="p">.78</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e618" class="stentry">
							<p class="p">APJ</p>

						</td>

						<td valign="top" headers="d95142e624" class="stentry">
							<p class="p">PROD2</p>

						</td>

						<td valign="top" headers="d95142e630" class="stentry">
							<p class="p">60</p>

						</td>

						<td valign="top" headers="d95142e636" class="stentry">
							<p class="p">90</p>

						</td>

						<td valign="top" headers="d95142e642" class="stentry">
							<p class="p">1.21</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e618" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e624" class="stentry">
							<p class="p">PROD1</p>

						</td>

						<td valign="top" headers="d95142e630" class="stentry">
							<p class="p">70</p>

						</td>

						<td valign="top" headers="d95142e636" class="stentry">
							<p class="p">200</p>

						</td>

						<td valign="top" headers="d95142e642" class="stentry">
							<p class="p">.73</p>

						</td>

					</tr>
<tr class="strow">
						<td valign="top" headers="d95142e618" class="stentry">
							<p class="p">EUR</p>

						</td>

						<td valign="top" headers="d95142e624" class="stentry">
							<p class="p">PROD2</p>

						</td>

						<td valign="top" headers="d95142e630" class="stentry">
							<p class="p">130</p>

						</td>

						<td valign="top" headers="d95142e636" class="stentry">
							<p class="p">200</p>

						</td>

						<td valign="top" headers="d95142e642" class="stentry">
							<p class="p">1.26</p>

						</td>

					</tr>
</table></div>
</div>

			<p class="p">The dynamic join calculates the sales share at the region level by aggregating the
				sales values before joining the data sources. The static join, on the other hand,
				first calculates the sales share at the region level and the country level (because
				the join condition contains both region and country), and then aggregates the
				resulting sales share after the join is executed.</p>

		</div>

	</div>

</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="Example: Dynamic Joins";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>