<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta name="abstract" content="CDS supports built-in annotations, for example, @Catalog, @Schema, and @nokey, which are important elements of the CDS documents used to define CDS-compliant catalog objects. However, you can define your own custom annotations, too."/>
<meta name="description" content="CDS supports built-in annotations, for example, @Catalog, @Schema, and @nokey, which are important elements of the CDS documents used to define CDS-compliant catalog objects. However, you can define your own custom annotations, too."/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=7416701334277673"/>
<title>CDS Annotations</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
<script type="text/javascript"><!-- 
        var loops = 10; 
        function GetLoio() { return "loio8217aac86d9748d8b034797ecc8065b6";
        } 
        function Sync() { if (parent.SAP_TOC && parent.SAP_TOC.gMenu) {parent.SAP_TOC.gMenu.SelectEntry(GetLoio()); } 
        else if (parent != self && loops-- > 0) { window.setTimeout( "Sync()",500 ); } } 
        Sync(); 

 function hijackLink (elem) { if(elem.href.indexOf('#')
          > 0 ){ var hr = elem.href.substr(0,
          elem.href.indexOf('#')); var anc = elem.href.substr(elem.href.indexOf('#'),
          elem.href.length); var dum = Math.random(); parent.window.location = hr + "?x=" + dum +
          anc; } } //-->
</script>
</head>
<body class="sap_bluecrystal" id="loio8217aac86d9748d8b034797ecc8065b6">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">CDS Annotations</h1>

	
	<div class="body refbody"><p class="shortdesc">CDS supports built-in annotations, for example, <span class="keyword">@Catalog</span>,
			<span class="keyword">@Schema</span>, and <span class="keyword">@nokey</span>, which are important elements
		of the CDS documents used to define CDS-compliant catalog objects. However, you can define
		your own custom annotations, too.</p>

		<div class="example"><h2 class="exampletitle">Example</h2>
			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">namespace mycompany.myapp1; 
<a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_n3x_fx4_xm" target="_top">@Schema</a> : 'MYSCHEMA'
context Books {

  <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_d1m_jx4_xm" target="_top">@Catalog</a>.tableType: #COLUMN
  <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_d1m_jx4_xm" target="_top">@Catalog</a>.index: [ { name : 'MYINDEX1', unique : true, order : #DESC, elementNames : ['ISBN'] } ] 
  entity BOOK { 
    key Author : String(100); 
    key BookTitle : String(100); 
        ISBN : Integer not null; 
        Publisher : String(100);
  };

  <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_d1m_jx4_xm" target="_top">@Catalog</a>.tableType : #COLUMN
  <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_o3q_2w4_xm" target="_top">@nokey</a>
  entity MyKeylessEntity
  {
    element1 : Integer;
    element2 : UTCTimestamp;
    <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_dqf_22w_zp" target="_top">@SearchIndex</a>.text: { enabled: true }
    element3 : String(7);
  };
  <a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_swt_vfr_vp" target="_top">@GenerateTableType</a> : false
  Type MyType1 {
    field1 : Integer;
    field2 : Integer;
    field3 : Integer;
  };
};
</pre></div>

		</div>

		<div class="section"><div class="section_title">Overview</div><div type="Overview">
			
			<p class="p">The following list indicates the annotations you can use in a CDS document:</p>

			<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_gkb_frf_rt">
				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_d1m_jx4_xm" target="_top"><samp class="ph codeph">@Catalog</samp></a></p>

				</li>

				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_o3q_2w4_xm" target="_top"><samp class="ph codeph">@nokey</samp></a></p>

				</li>

				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_n3x_fx4_xm" target="_top"><samp class="ph codeph">@Schema</samp></a></p>

				</li>

				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_swt_vfr_vp" target="_top"><samp class="ph codeph">@GenerateTableType</samp></a></p>

				</li>

				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_dqf_22w_zp" target="_top"><samp class="ph codeph">@SearchIndex</samp></a></p>

				</li>

				<li class="li">
					<p class="p"><a class="xref nopagenumber" href="default.html?8217aac86d9748d8b034797ecc8065b6.html#loio8217aac86d9748d8b034797ecc8065b6__section_cr5_zvq_qt" target="_top"><samp class="ph codeph">@WithStructuredPrivilegeCheck</samp></a></p>

				</li>

			</ul>

		</div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_d1m_jx4_xm"><div class="section_title">@Catalog</div><div type="@Catalog"><p class="p">The <span class="keyword">@Catalog</span>
				annotation supports the following parameters, each of which is described in detail
				in a dedicated section below:</p>
<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_exc_zzk_yj">
				<li class="li"><span class="keyword">@Catalog.index</span>
					<p class="p">Specify the type and scope of index to be created for the CDS entity, for
						example: name, order, unique/non-unique</p>
</li>

				<li class="li"><span class="keyword">@Catalog.tableType</span>
					<p class="p">Specify the table type for the CDS entity, for example, column, row, global
						temporary.</p>
</li>

			</ul>
<div class="sectiondiv">
				<p class="p">You use the <span class="keyword">@Catalog.index</span> annotation to define an index for a
					CDS entity. The <span class="keyword">@Catalog.index</span> annotation used in the
					following code example ensures that an index called <samp class="ph codeph">Index1</samp> is
					created for the entity <samp class="ph codeph">MyEntity1</samp> along with the index fields
						<samp class="ph codeph">fint</samp> and <samp class="ph codeph">futcshrt</samp>. The order for the index
					is ascending (<samp class="ph codeph">#ASC</samp>) and the index is unique. </p>

				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">namespace com.acme.myapp1;
@Catalog.tableType : #COLUMN
@Schema: 'MYSCHEMA'
@Catalog.index:[ { name:'Index1', unique:true, order:#ASC, elementNames:['fint', 'futcshrt' ] } ]
entity MyEntity1 {
	key fint:Integer;
	fstr    :String(5000);
	fstr15  :String(51);
	fbin    :Binary(4000);
	fbin15  :Binary(51);
	fint32  :Integer64;
	fdec53  :Decimal(5,3);
	fdecf   :DecimalFloat;
	fbinf   :BinaryFloat;
	futcshrt:UTCDateTime not null; 
	flstr   :LargeString;
	flbin   :LargeBinary;
};
</pre></div>

				<div class="p">You can define the following values for the <span class="keyword">@Catalog.index</span>
						annotation:<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_gqn_4zp_yj">
						<li class="li"><samp class="ph codeph">elementNames : ['<var class="keyword varname">&lt;name1&gt;</var>',
									'<var class="keyword varname">&lt;name2&gt;</var>' ]</samp><p class="p">The names of the fields
								to use in the index; the elements are specified for the entity
								definition, for example, <samp class="ph codeph">elementNames:['fint', 'futcshrt'
									]</samp></p>
</li>

						<li class="li"><samp class="ph codeph">name : '<var class="keyword varname">&lt;IndexName&gt;</var>'</samp><p class="p">The names of
								the index to be generated for the specified entity, for example,
									<samp class="ph codeph">name:'myIndex'</samp></p>
</li>

						<li class="li"><samp class="ph codeph">order</samp><p class="p">Create a table index sorted in ascending or
								descending order. The order keywords <samp class="ph codeph">#ASC</samp> and
									<samp class="ph codeph">#DESC</samp> can be only used in the
									<span class="ph emphasis emphasis">BTREE</span> index (for the maintenance of sorted
								data) and can be specified only once for each index.</p>
<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_s4k_b4q_yj">
								<li class="li"><samp class="ph codeph">order : #ASC</samp><p class="p">Creates an index for the CDS
										entity and sorts the index fields in
											<span class="ph emphasis emphasis">ascending</span> logical order, for
										example: 1, 2, 3...</p>
</li>

								<li class="li"><samp class="ph codeph">order : #DESC</samp><p class="p">Creates a index for the CDS
										entity and sorts the index fields in
											<span class="ph emphasis emphasis">descending</span> logical order, for
										example: 3, 2, 1...</p>
</li>

							</ul>
</li>

						<li class="li"><samp class="ph codeph">unique</samp><p class="p">Creates a unique index for the CDS entity. In
								a unique index, two rows of data in a table cannot have identical
								key values. </p>
<p class="p"/>
<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_mrv_f4q_yj">
								<li class="li"><samp class="ph codeph">unique : true</samp><p class="p">Creates a unique index for the
										CDS entity. The uniqueness is checked and, if necessary,
										enforced each time a key is added to (or changed in) the
										index.</p>
</li>

								<li class="li"><samp class="ph codeph">unique : false</samp><p class="p">Creates a non-unique index for
										the CDS entity. A non-unique index is intended primarily to
										improve query performance, for example, by maintaining a
										sorted order of values for data that is queried
										frequently.</p>
</li>

							</ul>
</li>

					</ul>
</div>

			</div><div class="sectiondiv">
				<div class="p">You use the <span class="keyword">@Catalog.tableType</span> annotation to define the type of CDS entity
					you want to create. The <span class="keyword">@Catalog.tableType</span> annotation
					determines the storage engine in which the underlying table is
					created.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">namespace com.acme.myapp1;
@Schema: 'MYSCHEMA'
context MyContext1 {
	@Catalog.tableType : #COLUMN
	entity MyEntity1 {
		key ID : Integer;
		name : String(30);
	};

	@Catalog.tableType : #ROW
	entity MyEntity2 {
		key ID : Integer;
		name : String(30);
	};
	@Catalog.tableType : #GLOBAL_TEMPORARY
	entity MyEntity3 {
		ID : Integer;
		name : String(30);
	};
};
</pre></div>
</div>

				<p class="p">You can define the following values for the <span class="keyword">@Catalog.tableType</span>
					annotation:</p>

				<ul class="ul" id="loio8217aac86d9748d8b034797ecc8065b6__ul_phb_gqk_yj">
					<li class="li"><samp class="ph codeph">#COLUMN</samp><p class="p">Create a column-based table. If the majority of
							table access is through a large number of tuples, with only a few
							selected attributes, use COLUMN-based storage for your table type.
						</p>
</li>

					<li class="li"><samp class="ph codeph">#ROW</samp><p class="p">Create a row-based table. If the majority of table
							access involves selecting a few records, with all attributes selected,
							use ROW-based storage for your table type.</p>
</li>

					<li class="li"><samp class="ph codeph">#GLOBAL_TEMPORARY</samp><p class="p">Set the scope of the created table.
							Data in a <span class="ph emphasis emphasis">global</span> temporary table is
							session-specific; only the owner session of the global temporary table
							is allowed to insert/read/truncate the data. A global temporary table
							exists for the duration of the session, and data from the global
							temporary table is automatically dropped when the session is terminated.
							A global temporary table can be dropped only when the table does not
							have any records in it.</p>
</li>

				</ul>

				<div class="note note" id="loio8217aac86d9748d8b034797ecc8065b6__note_N10068_N10043_N1001D_N1001A_N10001"><span class="notetitle">Note</span>  The <span class="ph pname">SAP HANA</span>
					database uses a combination of table types to enable storage and interpretation
					in both ROW and COLUMN forms. If no table type is specified in the CDS entity
					definition, the default value <span class="keyword">#COLUMN</span> is applied to the table
					created on activation of the design-time entity definition. </div>

			</div></div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_o3q_2w4_xm"><div class="section_title">@nokey</div><div type="@nokey">
			
			<p class="p">An entity usually has one or more key elements, which are flagged in the CDS entity definition
				with the <span class="keyword">key</span> keyword. The key elements become the primary key of
				the generated <span class="ph pname">SAP HANA</span> table and are automatically flagged as <span class="q">“not
					null”</span>. Structured elements can be part of the key, too. In this case, all
				table fields resulting from the flattening of this structured field are part of the
				primary key.</p>

			<div class="note note"><span class="notetitle">Note</span> </div>

			<p class="p">However, you can also define an entity that has no key elements. If you want to
				define an entity without a key, use the <span class="keyword">@nokey</span> annotation. In the
				following code example, the <span class="keyword">@nokey</span> annotation ensures that the
				entity <samp class="ph codeph">MyKeylessEntity</samp> defined in the CDS document creates a
				column-based table where no key element is defined.</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">namespace com.acme.myapp1;
@Schema: 'MYSCHEMA'
@Catalog.tableType : #COLUMN
@nokey
entity MyKeylessEntity
{
  element1 : Integer;
  element2 : UTCTimestamp;
  element3 : String(7);
};</pre></div>

		</div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_n3x_fx4_xm"><div class="section_title">@Schema</div><div type="@Schema">
			
			<p class="p">The <samp class="ph codeph">@Schema</samp> annotation is only allowed as a top-level definition in a CDS
				document. In the following code example <samp class="ph codeph">@Schema</samp> ensures that the
				schema <samp class="ph codeph">MYSCHEMA</samp> is used to contain the entity
					<samp class="ph codeph">MyEntity1</samp>, a column-based table.</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">namespace com.acme.myapp1;
@Schema: 'MYSCHEMA'
@Catalog.tableType : #COLUMN
entity MyEntity1 {
	key ID : Integer;
	name : String(30);
};</pre></div>

			<div class="note note" id="loio8217aac86d9748d8b034797ecc8065b6__note_N10121_N10104_N1001A_N10001"><span class="notetitle">Note</span> If the schema specified with the @Schema
				annotation does not already exist, an activation error is displayed and the
				entity-creation process fails.</div>

			<p class="p">The schema name must adhere to the <span class="ph pname">SAP HANA</span> rules for database
				identifiers. In addition, a schema name must not start with the letters
					<span class="ph filepath">SAP*</span>; the SAP* namespace is reserved for schemas used by
				SAP products and applications.</p>

		</div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_swt_vfr_vp"><div class="section_title">@GenerateTableType</div><div type="@GenerateTableType">
			
			<p class="p">For each structured type defined in a CDS document, an <span class="ph pname">SAP HANA</span> table type is
				generated, whose name is built by concatenating the elements of the CDS document
				containing the structured-type definition and separating the elements by a dot
				delimiter (.). The new SAP HANA table types are generated in the schema that is
				specified in the schema annotation of the respective top-level artifact in the CDS
				document containing the structured types. </p>

			<div class="note note"><span class="notetitle">Note</span> Table types are only generated for <span class="ph emphasis emphasis">direct</span> structure
				definitions; no table types are generated for <span class="ph emphasis emphasis">derived</span> types
				that are based on structured types.</div>

			<p class="p">If you want to use the structured types inside a CDS document
					<span class="ph emphasis emphasis">without</span> generating table types in the catalog, use the
				annotation <samp class="ph codeph">@GenerateTableType : false</samp>.</p>

		</div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_dqf_22w_zp"><div class="section_title">@SearchIndex</div><div type="@SearchIndex">
			
			<p class="p">The annotation <samp class="ph codeph">@SearchIndex</samp> enables you to define which of the
				columns should be indexed for search capabilities, for example, <samp class="ph codeph">{enabled :
					true}</samp>. To extend the index search definition, you can use the
				properties <samp class="ph codeph">text</samp> or <samp class="ph codeph">fuzzy</samp> to specify if the index
				should support text-based or fuzzy search, as illustrated in the following
				example:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">entity MyEntity100
  {
    element1 : Integer;
    @SearchIndex.text: { enabled: true }
    element2 : LargeString;
    @SearchIndex.fuzzy: { enabled: true }
    element3 : String(7);
  };</pre></div>

			<div class="note tip"><span class="tiptitle">Tip</span> For more information about setting up search features and using the search
				capability, see the <cite class="cite">SAP HANA Search Developer Guide </cite>.</div>

		</div></div>

		<div class="section" id="loio8217aac86d9748d8b034797ecc8065b6__section_cr5_zvq_qt"><div class="section_title">@WithStructuredPrivilegeCheck</div><div type="@WithStructuredPrivilegeCheck">
			
			<p class="p">The annotation <samp class="ph codeph">@WithStructuredPrivilegeCheck</samp> enables you to control
				access to data (for example, in a view) by means of privileges defined with the Data
				Control Language (DCL), as illustrated in the following example:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">@WithStructuredPrivilegeCheck
view MyView as select from Foo {
  &lt;select_list&gt;
} &lt;where_groupBy_Having_OrderBy&gt;;
</pre></div>

		</div></div>

	</div>

	<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="default.html?fd2a79e92a374d3596950d97f5386ba8.html" target="_top" title="In CDS, you can define your own custom annotations.">User-Defined CDS Annotations</a></div>
<div><a class="link" href="default.html?2bd80e51e3f54ff39b6bfe97bbfbc956.html" target="_top" title="A structured type is a data type comprising a list of attributes, each of which has its own data type. The attributes of the structured type can be defined manually in the structured type itself and reused either by another structured type or an entity.">CDS Structured Type Definition</a></div>
</div>
</div>
</div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html" target="_blank">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html" target="_blank">Important Disclaimers and Legal Information</a>
</div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="CDS Annotations";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>